using UnityEngine;
using System.Collections.Generic;

public class ObjectPool : MonoBehaviour
{
    readonly Dictionary<GameObject, Queue<GameObject>> _pools = new();

    public GameObject Spawn(GameObject prefab, Vector3 pos, Quaternion rot)
    {
        if (!_pools.TryGetValue(prefab, out var q)) { q = new Queue<GameObject>(); _pools[prefab] = q; }
        GameObject go = (q.Count > 0) ? q.Dequeue() : Instantiate(prefab, transform);
        go.transform.SetPositionAndRotation(pos, rot);
        go.SetActive(true);
        return go;
    }

    public void Despawn(GameObject prefab, GameObject instance)
    {
        instance.SetActive(false);
        _pools[prefab].Enqueue(instance);
    }
}
